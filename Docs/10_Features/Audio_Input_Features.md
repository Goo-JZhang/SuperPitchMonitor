# 音频输入功能说明

## 三种音频输入源

### 1. 音频设备输入 (Audio Device)
- 从物理音频设备捕获（麦克风、线路输入等）
- 支持选择具体设备
- **跨平台支持**: Windows ✅, Android ✅

### 2. 系统音频捕获 (System Audio)
- 捕获系统播放的声音（回环录制）
- 适用于分析其他应用播放的音频
- **跨平台支持**: Windows ✅ (需要 "Stereo Mix" 设备), Android ❌

### 3. 文件播放 (File Playback)
- 播放 Resources/TestAudio 目录下的音频文件
- 适用于测试和调试
- **跨平台支持**: 所有平台 ✅

## 使用方法

### 放置测试音频文件

将音频文件放入以下目录：
```
SuperPitchMonitor/Resources/TestAudio/
```

支持的格式：WAV, MP3, FLAC, AIFF, OGG

### 在应用中选择输入源

1. 启动应用
2. 在输入源选择器中，选择输入类型：
   - **Audio Device**: 使用麦克风/线路输入
   - **System Audio**: 捕获系统声音（Windows 需 Stereo Mix）
   - **File Playback**: 播放测试音频文件
3. 点击 **Start** 开始分析

### 系统音频捕获设置 (Windows)

1. 右键点击系统托盘的音量图标
2. 选择 **声音**
3. 切换到 **录制** 标签
4. 右键空白处，选择 **显示禁用的设备**
5. 启用 **Stereo Mix**（立体声混音）
6. 将其设为默认设备或在应用中选择它

## 跨平台兼容性

| 功能 | Windows | Android | 说明 |
|------|---------|---------|------|
| 音频设备 | ✅ | ✅ | 物理设备输入 |
| 系统音频 | ✅ | ❌ | Windows 需要 Stereo Mix |
| 文件播放 | ✅ | ✅ | Resources/TestAudio 目录 |

## 架构设计

```
┌─────────────────────────────────────┐
│         AudioInputSource            │
│         (抽象基类)                  │
└─────────────┬───────────────────────┘
              │
    ┌─────────┼─────────┐
    │         │         │
┌───▼───┐ ┌──▼────┐ ┌──▼────┐
│Device │ │System │ │ File  │
│Input  │ │Input  │ │Input  │
└───────┘ └───────┘ └───────┘
```

所有输入源都通过统一的接口提供音频数据，便于扩展新的输入类型。
