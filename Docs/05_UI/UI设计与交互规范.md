# UI è®¾è®¡ä¸äº¤äº’è§„èŒƒ

## 1. è®¾è®¡ç†å¿µ

### 1.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **å³æ—¶åé¦ˆ**: éŸ³é«˜æ£€æµ‹å’Œé¢‘è°±æ˜¾ç¤ºå¿…é¡»å®æ—¶å“åº”ï¼Œå»¶è¿Ÿæ„ŸçŸ¥ < 50ms
2. **æ¸…æ™°æ˜“è¯»**: åœ¨æ¼”å‡ºç¯å¢ƒä¸‹ä¹Ÿèƒ½å¿«é€Ÿè¯»å–å…³é”®ä¿¡æ¯
3. **ä¸“ä¸šç²¾å‡†**: æ»¡è¶³éŸ³ä¹ä¸“ä¸šäººå£«çš„éœ€æ±‚ï¼Œæä¾›ç²¾ç¡®æ•°æ®
4. **ç®€çº¦é«˜æ•ˆ**: å‡å°‘è§†è§‰å¹²æ‰°ï¼Œèšç„¦æ ¸å¿ƒåŠŸèƒ½

### 1.2 è§†è§‰é£æ ¼

- **æ·±è‰²ä¸»é¢˜**: é€‚åˆèˆå°å’Œä½å…‰ç¯å¢ƒ
- **é«˜å¯¹æ¯”åº¦**: ç¡®ä¿åœ¨å„ç§å…‰ç…§æ¡ä»¶ä¸‹å¯è¯»
- **è‰²å½©ç¼–ç **: ä½¿ç”¨é¢œè‰²è¡¨ç¤ºéŸ³é«˜å‡†ç¡®åº¦

---

## 2. ç•Œé¢å¸ƒå±€

### 2.1 ä¸»ç•Œé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status Bar (çŠ¶æ€æ )                                                        â”‚
â”‚  [ğŸ”´ REC] [âš¡é«˜æ€§èƒ½] [ğŸ”‹85%] [ğŸ“¶-12dB]                          [âš™ï¸è®¾ç½®] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚                    é¢‘è°±æ˜¾ç¤ºå™¨ (Spectrum Display)                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  dB â”‚                                                         â”‚    â”‚   â”‚
â”‚  â”‚  0  â”‚â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚    â”‚   â”‚
â”‚  â”‚ -20 â”‚â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚    â”‚   â”‚
â”‚  â”‚ -40 â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚    â”‚   â”‚
â”‚  â”‚ -60 â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚    â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚        100Hz        500Hz        1kHz        4kHz       8kHz       â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚        â–² æ£€æµ‹åˆ°çš„å³°å€¼é¢‘ç‡æ ‡è®°                                        â”‚   â”‚
â”‚  â”‚       â•± â•²                                                           â”‚   â”‚
â”‚  â”‚      â•±   â•²  è°æ³¢æŒ‡ç¤ºçº¿                                              â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    éŸ³é«˜æ˜¾ç¤ºå™¨ (Pitch Display)                        â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚   â”‚    A#    â”‚  â”‚    C#    â”‚  â”‚    F     â”‚  â”‚   ...    â”‚          â”‚   â”‚
â”‚  â”‚   â”‚   440.0  â”‚  â”‚   554.4  â”‚  â”‚   698.5  â”‚  â”‚          â”‚          â”‚   â”‚
â”‚  â”‚   â”‚   -2Â¢    â”‚  â”‚   +5Â¢    â”‚  â”‚   +1Â¢    â”‚  â”‚          â”‚          â”‚   â”‚
â”‚  â”‚   â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘  â”‚  â”‚          â”‚          â”‚   â”‚
â”‚  â”‚   â”‚  ç½®ä¿¡åº¦  â”‚  â”‚  ç½®ä¿¡åº¦  â”‚  â”‚  ç½®ä¿¡åº¦  â”‚  â”‚          â”‚          â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   å¤šéŸ³é«˜å¡ç‰‡æ˜¾ç¤º (æœ€å¤šæ˜¾ç¤º6ä¸ªéŸ³)                                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    è°ƒéŸ³æŒ‡ç¤ºå™¨ (Tuner View)                           â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚                    â”‚                                                â”‚   â”‚
â”‚  â”‚         â™­    â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€    â™¯                                    â”‚   â”‚
â”‚  â”‚         -50   -25  â”‚  +25   +50   éŸ³åˆ†                              â”‚   â”‚
â”‚  â”‚                    â–²                                                â”‚   â”‚
â”‚  â”‚                 å½“å‰åå·®                                            â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   [C4 â–²]  ä¸»æ£€æµ‹éŸ³é«˜                                                â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 è¯¦ç»†ç»„ä»¶è§„èŒƒ

#### 2.2.1 é¢‘è°±æ˜¾ç¤ºå™¨ (SpectrumDisplay)

```cpp
class SpectrumDisplay : public Component, private Timer
{
public:
    struct Config {
        Colour backgroundColour = Colours::black;
        Colour gridColour = Colours::darkgrey;
        Colour spectrumColour = Colour::fromRGB(0, 200, 255);
        Colour peakColour = Colours::yellow;
        
        int numBands = 128;           // é¢‘å¸¦æ•°é‡
        float minFreq = 20.0f;        // æœ€ä½æ˜¾ç¤ºé¢‘ç‡
        float maxFreq = 8000.0f;      // æœ€é«˜æ˜¾ç¤ºé¢‘ç‡
        float minDb = -80.0f;         // æœ€å° dB å€¼
        float maxDb = 0.0f;           // æœ€å¤§ dB å€¼
        
        bool showGrid = true;
        bool showPeaks = true;
        bool useLogScale = true;      // é¢‘ç‡è½´å¯¹æ•°åˆ»åº¦
    };
    
    void paint(Graphics& g) override
    {
        // ç»˜åˆ¶èƒŒæ™¯
        g.fillAll(config_.backgroundColour);
        
        // ç»˜åˆ¶ç½‘æ ¼
        if (config_.showGrid)
            drawGrid(g);
        
        // ç»˜åˆ¶é¢‘è°±
        drawSpectrum(g);
        
        // ç»˜åˆ¶å³°å€¼æ ‡è®°
        if (config_.showPeaks)
            drawPeakMarkers(g);
    }
    
    void updateSpectrum(const std::vector<float>& frequencies,
                       const std::vector<float>& magnitudes)
    {
        currentFrequencies_ = frequencies;
        currentMagnitudes_ = magnitudes;
        
        // æ£€æµ‹å³°å€¼
        detectPeaks();
        
        repaint();
    }
    
private:
    Config config_;
    std::vector<float> currentFrequencies_;
    std::vector<float> currentMagnitudes_;
    std::vector<Peak> detectedPeaks_;
    
    void drawGrid(Graphics& g)
    {
        g.setColour(config_.gridColour.withAlpha(0.3f));
        
        // å‚ç›´é¢‘ç‡çº¿ (å¯¹æ•°åˆ»åº¦)
        const float freqMarkers[] = {100, 200, 500, 1000, 2000, 4000, 8000};
        for (float freq : freqMarkers)
        {
            float x = freqToX(freq);
            g.drawVerticalLine((int)x, 0.0f, (float)getHeight());
            
            // é¢‘ç‡æ ‡ç­¾
            g.setFont(12.0f);
            String label = freq >= 1000 ? String(freq/1000, 1) + "k" : String((int)freq);
            g.drawText(label, (int)x - 20, getHeight() - 20, 40, 20, Justification::centred);
        }
        
        // æ°´å¹³ dB çº¿
        for (int db = (int)config_.minDb; db <= (int)config_.maxDb; db += 20)
        {
            float y = dbToY((float)db);
            g.drawHorizontalLine((int)y, 0.0f, (float)getWidth());
        }
    }
    
    void drawSpectrum(Graphics& g)
    {
        if (currentFrequencies_.empty()) return;
        
        Path spectrumPath;
        spectrumPath.startNewSubPath(0.0f, (float)getHeight());
        
        // æ„å»ºé¢‘è°±è·¯å¾„
        for (size_t i = 0; i < currentFrequencies_.size(); ++i)
        {
            float x = freqToX(currentFrequencies_[i]);
            float y = magnitudeToY(currentMagnitudes_[i]);
            spectrumPath.lineTo(x, y);
        }
        
        spectrumPath.lineTo((float)getWidth(), (float)getHeight());
        spectrumPath.closeSubPath();
        
        // æ¸å˜å¡«å……
        ColourGradient gradient(
            config_.spectrumColour.withAlpha(0.8f), 0.0f, 0.0f,
            config_.spectrumColour.withAlpha(0.1f), 0.0f, (float)getHeight(),
            false
        );
        
        g.setGradientFill(gradient);
        g.fillPath(spectrumPath);
        
        // ç»˜åˆ¶é¢‘è°±çº¿
        g.setColour(config_.spectrumColour);
        g.strokePath(spectrumPath, PathStrokeType(2.0f));
    }
    
    void drawPeakMarkers(Graphics& g)
    {
        g.setColour(config_.peakColour);
        
        for (const auto& peak : detectedPeaks_)
        {
            float x = freqToX(peak.frequency);
            float y = magnitudeToY(peak.magnitude);
            
            // ç»˜åˆ¶æ ‡è®°ä¸‰è§’å½¢
            Path marker;
            marker.addTriangle(x, y - 10, x - 5, y, x + 5, y);
            g.fillPath(marker);
            
            // é¢‘ç‡æ ‡ç­¾
            g.setFont(11.0f);
            String freqLabel = String(peak.frequency, 1) + " Hz";
            g.drawText(freqLabel, (int)x - 30, (int)y - 25, 60, 15, Justification::centred);
        }
    }
    
    float freqToX(float freq) const
    {
        if (config_.useLogScale)
        {
            float logMin = std::log10(config_.minFreq);
            float logMax = std::log10(config_.maxFreq);
            float logFreq = std::log10(jlimit(config_.minFreq, config_.maxFreq, freq));
            return (logFreq - logMin) / (logMax - logMin) * getWidth();
        }
        else
        {
            return (freq - config_.minFreq) / (config_.maxFreq - config_.minFreq) * getWidth();
        }
    }
    
    float magnitudeToY(float magnitude) const
    {
        float db = 20.0f * std::log10(magnitude + 1e-10f);
        db = jlimit(config_.minDb, config_.maxDb, db);
        return getHeight() * (1.0f - (db - config_.minDb) / (config_.maxDb - config_.minDb));
    }
};
```

#### 2.2.2 éŸ³é«˜æ˜¾ç¤ºå¡ç‰‡ (PitchCard)

```cpp
class PitchCard : public Component
{
public:
    struct PitchData {
        String noteName;        // éŸ³ç¬¦åç§° (å¦‚ "A#")
        int octave;             // å…«åº¦
        float frequency;        // ç²¾ç¡®é¢‘ç‡
        float cents;            // éŸ³åˆ†åå·®
        float confidence;       // ç½®ä¿¡åº¦ 0-1
        int harmonicCount;      // è°æ³¢æ•°é‡
    };
    
    void setPitchData(const PitchData& data)
    {
        data_ = data;
        repaint();
    }
    
    void paint(Graphics& g) override
    {
        auto bounds = getLocalBounds().toFloat().reduced(4.0f);
        
        // èƒŒæ™¯ (æ ¹æ®ç½®ä¿¡åº¦ç€è‰²)
        float hue = jlimit(0.0f, 0.33f, data_.confidence * 0.33f);  // çº¢ -> ç»¿
        Colour bgColour = Colour::fromHSV(hue, 0.8f, 0.2f, 1.0f);
        Colour borderColour = Colour::fromHSV(hue, 0.8f, 0.8f, 1.0f);
        
        g.setColour(bgColour);
        g.fillRoundedRectangle(bounds, 8.0f);
        
        g.setColour(borderColour);
        g.drawRoundedRectangle(bounds, 8.0f, 2.0f);
        
        // éŸ³ç¬¦åç§°
        g.setColour(Colours::white);
        g.setFont(28.0f);
        g.drawText(data_.noteName + String(data_.octave), 
                   bounds.removeFromTop(bounds.getHeight() * 0.4f),
                   Justification::centred);
        
        // é¢‘ç‡
        g.setFont(14.0f);
        g.setColour(Colours::lightgrey);
        g.drawText(String(data_.frequency, 1) + " Hz",
                   bounds.removeFromTop(20.0f),
                   Justification::centred);
        
        // éŸ³åˆ†åå·® (å¸¦é¢œè‰²)
        String centsText = (data_.cents >= 0 ? "+" : "") + String(data_.cents, 1) + "Â¢";
        Colour centsColour = std::abs(data_.cents) < 5.0f ? Colours::green :
                             std::abs(data_.cents) < 20.0f ? Colours::yellow : Colours::red;
        g.setColour(centsColour);
        g.drawText(centsText, bounds.removeFromTop(20.0f), Justification::centred);
        
        // ç½®ä¿¡åº¦æ¡
        float barY = bounds.getCentreY();
        float barWidth = bounds.getWidth() * 0.8f;
        float barHeight = 6.0f;
        float barX = bounds.getCentreX() - barWidth / 2;
        
        // èƒŒæ™¯æ¡
        g.setColour(Colours::darkgrey);
        g.fillRoundedRectangle(barX, barY - barHeight/2, barWidth, barHeight, 3.0f);
        
        // è¿›åº¦æ¡
        g.setColour(Colour::fromHSV(data_.confidence * 0.33f, 0.8f, 1.0f, 1.0f));
        g.fillRoundedRectangle(barX, barY - barHeight/2, 
                               barWidth * data_.confidence, barHeight, 3.0f);
    }
    
private:
    PitchData data_;
};
```

#### 2.2.3 è°ƒéŸ³æŒ‡ç¤ºå™¨ (TunerDisplay)

```cpp
class TunerDisplay : public Component
{
public:
    void setTargetPitch(float midiNote, float centsDeviation)
    {
        targetMidi_ = midiNote;
        centsDeviation_ = centsDeviation;
        repaint();
    }
    
    void paint(Graphics& g) override
    {
        auto bounds = getLocalBounds().toFloat();
        float centreX = bounds.getCentreX();
        float centreY = bounds.getCentreY();
        
        // ç»˜åˆ¶åˆ»åº¦å¼§
        Path arc;
        arc.addCentredArc(centreX, centreY + 50, 120, 80, 0, 
                          -2.5f, 2.5f, true);
        g.setColour(Colours::darkgrey);
        g.strokePath(arc, PathStrokeType(4.0f));
        
        // ç»˜åˆ¶åˆ»åº¦æ ‡è®°
        for (int i = -50; i <= 50; i += 10)
        {
            float angle = i / 50.0f * 2.5f;
            float x1 = centreX + std::sin(angle) * 100;
            float y1 = centreY + 50 - std::cos(angle) * 60;
            float x2 = centreX + std::sin(angle) * 120;
            float y2 = centreY + 50 - std::cos(angle) * 80;
            
            g.setColour(i == 0 ? Colours::green : Colours::grey);
            g.drawLine(x1, y1, x2, y2, i == 0 ? 3.0f : 1.0f);
            
            // æ ‡ç­¾
            if (i % 25 == 0)
            {
                float lx = centreX + std::sin(angle) * 140;
                float ly = centreY + 50 - std::cos(angle) * 100;
                g.setFont(12.0f);
                g.setColour(Colours::lightgrey);
                g.drawText(String(i), (int)lx - 15, (int)ly - 10, 30, 20, 
                          Justification::centred);
            }
        }
        
        // ç»˜åˆ¶æŒ‡é’ˆ
        float needleAngle = jlimit(-50.0f, 50.0f, centsDeviation_) / 50.0f * 2.5f;
        float nx = centreX + std::sin(needleAngle) * 110;
        float ny = centreY + 50 - std::cos(needleAngle) * 70;
        
        // æŒ‡é’ˆé¢œè‰²æ ¹æ®åå·®
        Colour needleColour = std::abs(centsDeviation_) < 5.0f ? Colours::green :
                              std::abs(centsDeviation_) < 20.0f ? Colours::yellow : Colours::red;
        
        Path needle;
        needle.addTriangle(centreX, centreY + 50 - 10, nx - 4, ny + 10, nx + 4, ny + 10);
        g.setColour(needleColour);
        g.fillPath(needle);
        
        // å½“å‰éŸ³é«˜æ˜¾ç¤º
        g.setFont(32.0f);
        g.setColour(Colours::white);
        int note = (int)targetMidi_ % 12;
        int octave = (int)targetMidi_ / 12 - 1;
        const char* noteNames[] = {"C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"};
        g.drawText(String(noteNames[note]) + String(octave), 
                   (int)centreX - 50, (int)centreY - 80, 100, 40, 
                   Justification::centred);
        
        // éŸ³å‡†çŠ¶æ€
        String status = std::abs(centsDeviation_) < 5.0f ? "IN TUNE" :
                        centsDeviation_ > 0 ? "SHARP" : "FLAT";
        g.setFont(14.0f);
        g.setColour(needleColour);
        g.drawText(status, (int)centreX - 50, (int)centreY - 40, 100, 20, 
                   Justification::centred);
    }
    
private:
    float targetMidi_ = 0.0f;
    float centsDeviation_ = 0.0f;
};
```

---

## 3. è®¾ç½®ç•Œé¢

### 3.1 è®¾ç½®é¢æ¿å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Settings                          [âœ•]                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Detection Settings                                                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  æ£€æµ‹èŒƒå›´:  [â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]  50Hz - 2000Hz              â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  çµæ•åº¦:    [â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]  ä¸­                          â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  æœ€å¤§éŸ³æ•°:  [4] â–²â–¼                                                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [âœ“] å¯ç”¨å¤šéŸ³æ£€æµ‹                                                    â”‚   â”‚
â”‚  â”‚  [âœ“] å¯ç”¨è°æ³¢å¢å¼º                                                    â”‚   â”‚
â”‚  â”‚  [ ] å¯ç”¨NMF (é«˜æ€§èƒ½æ¨¡å¼)                                            â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Display Settings                                                    â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ä¸»é¢˜:     [æ·±è‰² â–¼]                                                 â”‚   â”‚
â”‚  â”‚  åˆ·æ–°ç‡:   [60fps â–¼]                                                â”‚   â”‚
â”‚  â”‚  é¢‘å¸¦æ•°é‡: [128 â–¼]                                                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [âœ“] æ˜¾ç¤ºéŸ³åˆ†åå·®                                                    â”‚   â”‚
â”‚  â”‚  [âœ“] æ˜¾ç¤ºç½®ä¿¡åº¦                                                      â”‚   â”‚
â”‚  â”‚  [ ] æ˜¾ç¤ºé¢‘è°±ç½‘æ ¼                                                    â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Performance Settings                                                â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  æ€§èƒ½æ¨¡å¼:  [å¹³è¡¡ â–¼]                                                â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [âœ“] è‡ªé€‚åº”è´¨é‡                                                      â”‚   â”‚
â”‚  â”‚  [âœ“] ä½ç”µé‡æ—¶é™é¢‘                                                    â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚                              [  æ¢å¤é»˜è®¤  ]  [  ä¿å­˜  ]                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. äº¤äº’è®¾è®¡

### 4.1 æ‰‹åŠ¿æ“ä½œ

| æ‰‹åŠ¿ | æ“ä½œ | åŠŸèƒ½ |
|-----|------|-----|
| å•æŒ‡ç‚¹å‡» | é¢‘è°±åŒºåŸŸ | æŸ¥çœ‹è¯¥é¢‘ç‡è¯¦æƒ… |
| åŒæŒ‡æåˆ | é¢‘è°±åŒºåŸŸ | ç¼©æ”¾é¢‘ç‡èŒƒå›´ |
| æ°´å¹³æ»‘åŠ¨ | é¢‘è°±åŒºåŸŸ | è°ƒæ•´å‚è€ƒé¢‘ç‡ |
| é•¿æŒ‰ | éŸ³é«˜å¡ç‰‡ | æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ |
| ä¸‹æ‹‰ | ä¸»ç•Œé¢ | æ‰“å¼€å¿«é€Ÿè®¾ç½® |

### 4.2 çŠ¶æ€æŒ‡ç¤º

```cpp
enum class DetectionStatus {
    Idle,           // ç°è‰² - æœªå¼€å§‹æ£€æµ‹
    Listening,      // ç»¿è‰²å‘¼å¸ - ç›‘å¬ä¸­
    Detecting,      // é»„è‰² - æ£€æµ‹åˆ°ä¿¡å·åˆ†æä¸­
    Detected,       // ç»¿è‰² - æˆåŠŸæ£€æµ‹åˆ°éŸ³é«˜
    LowConfidence,  // æ©™è‰² - ä½ç½®ä¿¡åº¦ç»“æœ
    Error           // çº¢è‰² - é”™è¯¯çŠ¶æ€
};

class StatusIndicator : public Component
{
public:
    void setStatus(DetectionStatus status)
    {
        status_ = status;
        startAnimation();
    }
    
    void paint(Graphics& g) override
    {
        Colour colour;
        switch (status_)
        {
            case DetectionStatus::Idle: colour = Colours::grey; break;
            case DetectionStatus::Listening: colour = Colours::green.withAlpha(0.5f); break;
            case DetectionStatus::Detecting: colour = Colours::yellow; break;
            case DetectionStatus::Detected: colour = Colours::green; break;
            case DetectionStatus::LowConfidence: colour = Colours::orange; break;
            case DetectionStatus::Error: colour = Colours::red; break;
        }
        
        g.setColour(colour);
        
        // å‘¼å¸æ•ˆæœ
        if (status_ == DetectionStatus::Listening)
        {
            float pulse = (std::sin(animationPhase_) + 1.0f) * 0.5f;
            g.fillEllipse(getLocalBounds().toFloat().reduced(2.0f * pulse));
        }
        else
        {
            g.fillEllipse(getLocalBounds().toFloat());
        }
    }
    
private:
    DetectionStatus status_ = DetectionStatus::Idle;
    float animationPhase_ = 0.0f;
    
    void startAnimation()
    {
        // å¯åŠ¨å®šæ—¶å™¨æ›´æ–° animationPhase_
    }
};
```

---

## 5. é¢œè‰²ç³»ç»Ÿ

```cpp
namespace Colours {
    // ä¸»è‰²è°ƒ
    const Colour primary = Colour::fromRGB(0, 200, 255);
    const Colour secondary = Colour::fromRGB(150, 100, 255);
    
    // èƒŒæ™¯
    const Colour backgroundDark = Colour::fromRGB(20, 20, 25);
    const Colour backgroundCard = Colour::fromRGB(35, 35, 42);
    
    // çŠ¶æ€è‰²
    const Colour success = Colour::fromRGB(50, 200, 100);
    const Colour warning = Colour::fromRGB(255, 180, 50);
    const Colour error = Colour::fromRGB(255, 80, 80);
    
    // éŸ³å‡†æŒ‡ç¤º
    const Colour inTune = Colour::fromRGB(0, 255, 100);
    const Colour sharp = Colour::fromRGB(255, 200, 0);
    const Colour flat = Colour::fromRGB(255, 100, 100);
    
    // é¢‘è°±æ¸å˜
    const Colour spectrumLow = Colour::fromRGB(0, 255, 200);
    const Colour spectrumMid = Colour::fromRGB(255, 200, 0);
    const Colour spectrumHigh = Colour::fromRGB(255, 50, 100);
}
```

---

## 6. å“åº”å¼å¸ƒå±€

### 6.1 å±å¹•é€‚é…

```cpp
class ResponsiveLayout
{
public:
    enum class ScreenSize {
        Compact,    // < 360dp å®½ (å°å±æ‰‹æœº)
        Medium,     // 360-600dp (æ ‡å‡†æ‰‹æœº)
        Expanded,   // > 600dp (å¹³æ¿/å¤§å±)
        Large       // > 900dp (æ¨ªå±å¹³æ¿)
    };
    
    static ScreenSize getScreenSize(int widthDp)
    {
        if (widthDp < 360) return ScreenSize::Compact;
        if (widthDp < 600) return ScreenSize::Medium;
        if (widthDp < 900) return ScreenSize::Expanded;
        return ScreenSize::Large;
    }
    
    static void configureLayout(Component& mainComponent, ScreenSize size)
    {
        switch (size)
        {
            case ScreenSize::Compact:
                // ç´§å‡‘å¸ƒå±€: é¢‘è°±å 50%ï¼ŒéŸ³é«˜å¡ç‰‡å‚ç›´æ’åˆ—
                break;
            case ScreenSize::Medium:
                // æ ‡å‡†å¸ƒå±€
                break;
            case ScreenSize::Expanded:
                // å¹³æ¿å¸ƒå±€: é¢‘è°±å’ŒéŸ³é«˜å¹¶æ’
                break;
            case ScreenSize::Large:
                // æ¨ªå±å¸ƒå±€: æ‰©å±•ä¿¡æ¯æ˜¾ç¤º
                break;
        }
    }
};
```

---

## 7. åŠ¨ç”»è§„èŒƒ

| åŠ¨ç”» | æ—¶é•¿ | ç¼“åŠ¨ | è¯´æ˜ |
|-----|------|-----|------|
| éŸ³é«˜å¡ç‰‡å‡ºç° | 200ms | Ease-out | ç¼©æ”¾ + æ·¡å…¥ |
| é¢‘è°±æ›´æ–° | 16ms | Linear | æ¯å¸§å¹³æ»‘è¿‡æ¸¡ |
| æŒ‡é’ˆç§»åŠ¨ | 100ms | Ease-in-out | è°ƒéŸ³å™¨æŒ‡é’ˆ |
| çŠ¶æ€åˆ‡æ¢ | 300ms | Ease-out | çŠ¶æ€æŒ‡ç¤ºå™¨é¢œè‰²å˜åŒ– |
| é¢æ¿æ»‘åŠ¨ | 250ms | Decelerate | è®¾ç½®é¢æ¿ |
